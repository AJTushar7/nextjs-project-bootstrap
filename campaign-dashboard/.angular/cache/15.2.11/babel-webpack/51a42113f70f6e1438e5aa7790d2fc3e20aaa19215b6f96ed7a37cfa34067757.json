{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/dashboard-data.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"text-green-600\": a0,\n    \"text-red-600\": a1\n  };\n};\nfunction DashboardComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 80)(1, \"div\", 81);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 82);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 83);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const card_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(card_r9.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(card_r9.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, card_r9.change >= 0, card_r9.change < 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", card_r9.change >= 0 ? \"+\" : \"\", \"\", card_r9.change, \"% \");\n  }\n}\nfunction DashboardComponent_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 84);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r10.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r10.label);\n  }\n}\nfunction DashboardComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 85)(1, \"div\", 86);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 87);\n    i0.ɵɵelement(4, \"div\", 88);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 89);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const channel_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(channel_r11.label);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", channel_r11.value / ctx_r2.getMaxValue() * 100, \"%\")(\"background-color\", ctx_r2.selectedCriteria === \"sent\" ? \"#42A5F5\" : \"#66BB6A\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(channel_r11.value);\n  }\n}\nfunction DashboardComponent_option_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 84);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const status_r13 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(status_r13);\n  }\n}\nfunction DashboardComponent_div_59_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 92)(1, \"h4\", 44);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 93)(10, \"button\", 94);\n    i0.ɵɵtext(11, \"Pause\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 95);\n    i0.ɵɵtext(13, \"Resume\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 96);\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 97);\n    i0.ɵɵtext(17, \"Duplicate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 98);\n    i0.ɵɵtext(19, \"Report\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const campaign_r15 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(campaign_r15.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Status: \", campaign_r15.status, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Start Date: \", campaign_r15.startDate, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"End Date: \", campaign_r15.endDate, \"\");\n  }\n}\nfunction DashboardComponent_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 90);\n    i0.ɵɵtemplate(1, DashboardComponent_div_59_div_1_Template, 20, 4, \"div\", 91);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(2, 1, ctx_r4.filteredCampaigns, ctx_r4.cardViewStart, ctx_r4.cardViewStart + 3));\n  }\n}\nfunction DashboardComponent_div_60_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 39);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 39);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 39);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 39)(10, \"button\", 100);\n    i0.ɵɵtext(11, \"Pause\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 101);\n    i0.ɵɵtext(13, \"Resume\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 102);\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 103);\n    i0.ɵɵtext(17, \"Duplicate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 98);\n    i0.ɵɵtext(19, \"Report\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const campaign_r17 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(campaign_r17.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(campaign_r17.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(campaign_r17.startDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(campaign_r17.endDate);\n  }\n}\nfunction DashboardComponent_div_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 99)(1, \"table\", 37)(2, \"thead\")(3, \"tr\", 38)(4, \"th\", 39);\n    i0.ɵɵtext(5, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 39);\n    i0.ɵɵtext(7, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 39);\n    i0.ɵɵtext(9, \"Start Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 39);\n    i0.ɵɵtext(11, \"End Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 39);\n    i0.ɵɵtext(13, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, DashboardComponent_div_60_tr_15_Template, 20, 4, \"tr\", 40);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.filteredCampaigns);\n  }\n}\nfunction DashboardComponent_tr_89_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 39);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 39);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 39);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 39);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const bsp_r18 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(bsp_r18.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, bsp_r18.cost));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", bsp_r18.delivery, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", bsp_r18.engagement, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(bsp_r18.optimization);\n  }\n}\nfunction DashboardComponent_tr_164_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 39);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 39);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 39);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const segment_r19 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(segment_r19.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(segment_r19.inactiveCount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(segment_r19.lastActivity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 4, segment_r19.savings));\n  }\n}\nfunction DashboardComponent_div_169_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 104);\n    i0.ɵɵelement(1, \"div\", 105);\n    i0.ɵɵelementStart(2, \"div\", 106)(3, \"h4\", 107);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 108);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 109)(8, \"div\", 110)(9, \"div\", 46);\n    i0.ɵɵtext(10, \"Messages Sent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 111);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 112)(15, \"div\", 46);\n    i0.ɵɵtext(16, \"Engagement Rate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 113);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 114)(20, \"div\", 46);\n    i0.ɵɵtext(21, \"Revenue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 115);\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 116)(26, \"div\", 46);\n    i0.ɵɵtext(27, \"ROI\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 117);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const festival_r20 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(festival_r20.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(festival_r20.date);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 6, festival_r20.messagesSent));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", festival_r20.engagementRate, \"%\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(24, 8, festival_r20.revenue));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", festival_r20.roi, \"%\");\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\nconst _c2 = function (a0) {\n  return {\n    \"bg-blue-600 text-white\": a0\n  };\n};\nexport class DashboardComponent {\n  constructor(dashboardService) {\n    this.dashboardService = dashboardService;\n    this.errorMessage = '';\n    this.startDate = '';\n    this.endDate = '';\n    this.maxDate = '';\n    this.kpiCards = [{\n      title: 'Total Revenue',\n      value: '$1.2M',\n      change: 5.4\n    }, {\n      title: 'Campaign ROI',\n      value: '350%',\n      change: 3.2\n    }, {\n      title: 'Messages Sent',\n      value: '1.5M',\n      change: -1.1\n    }, {\n      title: 'Avg Conversion Rate',\n      value: '4.5%',\n      change: 0.8\n    }];\n    this.selectedCriteria = 'sent';\n    this.criteriaOptions = [{\n      label: 'Sent',\n      value: 'sent'\n    }, {\n      label: 'Delivered',\n      value: 'delivered'\n    }];\n    this.viewMode = 'card';\n    this.statusOptions = ['Active', 'Paused', 'Completed'];\n    this.selectedStatus = '';\n    this.cardViewStart = 0;\n    this.bspPerformanceData = [{\n      name: 'BSP 1',\n      cost: 1200,\n      delivery: 95,\n      engagement: 80,\n      optimization: 'High'\n    }, {\n      name: 'BSP 2',\n      cost: 1500,\n      delivery: 90,\n      engagement: 75,\n      optimization: 'Medium'\n    }, {\n      name: 'BSP 3',\n      cost: 1100,\n      delivery: 85,\n      engagement: 70,\n      optimization: 'Low'\n    }, {\n      name: 'BSP 4',\n      cost: 1300,\n      delivery: 92,\n      engagement: 78,\n      optimization: 'High'\n    }, {\n      name: 'BSP 5',\n      cost: 1400,\n      delivery: 88,\n      engagement: 74,\n      optimization: 'Medium'\n    }];\n    this.orchestrationData = {\n      messageFlowEfficiency: 87,\n      channelSync: 92,\n      fallbackSuccess: 78,\n      overallScore: 8.5\n    };\n    this.inactiveCustomerData = {\n      segments: 12,\n      exclusionLists: 8,\n      potentialSavings: 15000,\n      segmentBreakdown: [{\n        name: 'Dormant Users',\n        inactiveCount: 2500,\n        lastActivity: '90+ days',\n        savings: 5000\n      }, {\n        name: 'Low Engagement',\n        inactiveCount: 1800,\n        lastActivity: '60+ days',\n        savings: 3500\n      }, {\n        name: 'Unsubscribed',\n        inactiveCount: 3200,\n        lastActivity: '30+ days',\n        savings: 6500\n      }]\n    };\n    this.festivalData = [{\n      name: 'Diwali 2024',\n      date: 'November 1, 2024',\n      messagesSent: 250000,\n      engagementRate: 85,\n      revenue: 125000,\n      roi: 320\n    }, {\n      name: 'Christmas 2023',\n      date: 'December 25, 2023',\n      messagesSent: 180000,\n      engagementRate: 78,\n      revenue: 95000,\n      roi: 280\n    }, {\n      name: 'New Year 2024',\n      date: 'January 1, 2024',\n      messagesSent: 200000,\n      engagementRate: 82,\n      revenue: 110000,\n      roi: 300\n    }];\n    this.budgetCalculator = {\n      preCampaign: {\n        plannedBudget: 10000,\n        expectedMessages: 50000,\n        targetConversionRate: 5\n      },\n      postCampaign: {\n        actualSpend: 9500,\n        messagesSent: 48000,\n        actualConversionRate: 5.5\n      }\n    };\n  }\n  ngOnInit() {\n    try {\n      this.channelData = this.dashboardService.getChannelPerformance();\n      this.engagementMetrics = this.dashboardService.getEngagementMetrics();\n      this.budgetMetrics = this.dashboardService.getBudgetMetrics();\n      this.campaignEvents = this.dashboardService.getCampaignEvents();\n      // Initialize date range to last 7 days\n      const today = new Date();\n      this.maxDate = today.toISOString().split('T')[0];\n      const priorDate = new Date().setDate(today.getDate() - 7);\n      this.startDate = new Date(priorDate).toISOString().split('T')[0];\n      this.endDate = this.maxDate;\n      this.updateChannelChart();\n    } catch (error) {\n      this.errorMessage = 'An error occurred while loading dashboard data.';\n      console.error(error);\n    }\n  }\n  updateChannelChart() {\n    if (!this.channelData) return;\n    const dataKey = this.selectedCriteria === 'sent' ? 'Sent' : 'Delivered';\n    this.channelChartData = {\n      labels: this.channelData.labels,\n      datasets: [{\n        label: dataKey,\n        backgroundColor: this.selectedCriteria === 'sent' ? '#42A5F5' : '#66BB6A',\n        data: this.selectedCriteria === 'sent' ? this.channelData.datasets[0].data : this.channelData.datasets[1].data\n      }]\n    };\n    this.channelChartOptions = {\n      indexAxis: 'y',\n      responsive: true,\n      plugins: {\n        legend: {\n          display: true,\n          position: 'top'\n        },\n        tooltip: {\n          enabled: true\n        }\n      },\n      scales: {\n        x: {\n          beginAtZero: true\n        }\n      }\n    };\n  }\n  onCriteriaChange() {\n    this.updateChannelChart();\n  }\n  getHeatmapColor(value) {\n    if (value >= 75) {\n      return '#34D399'; // green\n    } else if (value >= 50) {\n      return '#FBBF24'; // yellow\n    } else {\n      return '#F87171'; // red\n    }\n  }\n\n  get filteredCampaigns() {\n    if (!this.campaignEvents) return [];\n    if (!this.selectedStatus) return this.campaignEvents;\n    return this.campaignEvents.filter(c => c.status === this.selectedStatus);\n  }\n  setViewMode(mode) {\n    this.viewMode = mode;\n  }\n  prevCardView() {\n    if (this.cardViewStart > 0) {\n      this.cardViewStart -= 1;\n    }\n  }\n  nextCardView() {\n    if (this.cardViewStart + 3 < this.filteredCampaigns.length) {\n      this.cardViewStart += 1;\n    }\n  }\n  onDateChange() {\n    // Validate date range max 15 days\n    if (this.startDate && this.endDate) {\n      const start = new Date(this.startDate);\n      const end = new Date(this.endDate);\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const diffDays = diffTime / (1000 * 60 * 60 * 24);\n      if (diffDays > 15) {\n        alert('Date range cannot exceed 15 days.');\n        // Reset endDate to startDate + 15 days or today\n        const maxEnd = new Date(start);\n        maxEnd.setDate(start.getDate() + 15);\n        this.endDate = maxEnd > new Date() ? new Date().toISOString().split('T')[0] : maxEnd.toISOString().split('T')[0];\n      }\n    }\n    // TODO: Refresh data based on new date range\n  }\n\n  getEstimatedCPM() {\n    if (this.budgetCalculator.preCampaign.expectedMessages > 0) {\n      return this.budgetCalculator.preCampaign.plannedBudget / this.budgetCalculator.preCampaign.expectedMessages * 1000;\n    }\n    return 0;\n  }\n  getActualCPM() {\n    if (this.budgetCalculator.postCampaign.messagesSent > 0) {\n      return this.budgetCalculator.postCampaign.actualSpend / this.budgetCalculator.postCampaign.messagesSent * 1000;\n    }\n    return 0;\n  }\n  getBudgetVariance() {\n    return this.budgetCalculator.postCampaign.actualSpend - this.budgetCalculator.preCampaign.plannedBudget;\n  }\n  getConversionVariance() {\n    return this.budgetCalculator.postCampaign.actualConversionRate - this.budgetCalculator.preCampaign.targetConversionRate;\n  }\n  getBudgetVarianceColor() {\n    const variance = this.getBudgetVariance();\n    return variance <= 0 ? 'text-green-600' : 'text-red-600';\n  }\n  getConversionVarianceColor() {\n    const variance = this.getConversionVariance();\n    return variance >= 0 ? 'text-green-600' : 'text-red-600';\n  }\n  getEfficiencyScore() {\n    const budgetEfficiency = this.getBudgetVariance() <= 0 ? 5 : Math.max(0, 5 - Math.abs(this.getBudgetVariance()) / 1000);\n    const conversionEfficiency = this.getConversionVariance() >= 0 ? 5 : Math.max(0, 5 - Math.abs(this.getConversionVariance()));\n    return Math.round((budgetEfficiency + conversionEfficiency) * 10) / 10;\n  }\n  createCampaign() {\n    alert('Create Campaign button clicked!');\n    // TODO: Implement create campaign functionality\n  }\n\n  static {\n    this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.DashboardDataService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 238,\n      vars: 64,\n      consts: [[1, \"top-bar\", \"p-4\", \"flex\", \"items-center\", \"justify-between\", \"border-b\", \"border-gray-300\"], [1, \"date-range-selector\"], [\"for\", \"dateRange\", 1, \"mr-2\", \"font-semibold\"], [\"type\", \"date\", \"id\", \"startDate\", \"name\", \"startDate\", \"max\", \"\", 1, \"border\", \"border-gray-400\", \"rounded\", \"px-2\", \"py-1\", \"mr-2\", 3, \"value\", \"max\", \"change\"], [\"type\", \"date\", \"id\", \"endDate\", \"name\", \"endDate\", \"max\", \"\", 1, \"border\", \"border-gray-400\", \"rounded\", \"px-2\", \"py-1\", \"ml-2\", 3, \"value\", \"min\", \"max\", \"change\"], [1, \"create-campaign-btn\", \"bg-blue-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", \"hover:bg-blue-700\", \"transition\", 3, \"click\"], [1, \"kpi-cards\", \"flex\", \"space-x-4\", \"p-4\"], [\"class\", \"kpi-card bg-white shadow rounded p-4 flex-1 text-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"channel-performance\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [1, \"text-lg\", \"font-semibold\"], [1, \"mr-2\", \"font-medium\"], [1, \"border\", \"border-gray-300\", \"rounded\", \"px-2\", \"py-1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"chart-container\"], [1, \"chart-bars\"], [\"class\", \"chart-bar-item flex items-center mb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"engagement-heatmap\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"text-lg\", \"font-semibold\", \"mb-4\"], [1, \"grid\", \"grid-cols-3\", \"gap-4\", \"text-center\"], [1, \"heatmap-cell\", \"p-4\", \"rounded\", 3, \"ngStyle\"], [1, \"font-semibold\"], [1, \"text-2xl\"], [1, \"real-time-monitoring\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"mr-2\", \"px-3\", \"py-1\", \"rounded\", \"border\", 3, \"ngClass\", \"click\"], [1, \"px-3\", \"py-1\", \"rounded\", \"border\", 3, \"ngClass\", \"click\"], [1, \"filters\", \"mb-4\", \"flex\", \"space-x-4\"], [1, \"border\", \"border-gray-300\", \"rounded\", \"px-2\", \"py-1\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\"], [\"class\", \"card-view flex space-x-4 overflow-x-auto\", 4, \"ngIf\"], [\"class\", \"table-view overflow-x-auto\", 4, \"ngIf\"], [1, \"mt-4\", \"flex\", \"justify-between\"], [1, \"px-3\", \"py-1\", \"bg-gray-300\", \"rounded\", \"hover:bg-gray-400\", 3, \"disabled\", \"click\"], [1, \"analytics-suggestions\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"text-gray-600\"], [1, \"bsp-performance\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"overflow-x-auto\"], [1, \"min-w-full\", \"border\", \"border-gray-300\", \"rounded\"], [1, \"bg-gray-200\"], [1, \"border\", \"border-gray-300\", \"px-4\", \"py-2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"orchestration-analysis\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-4\"], [1, \"orchestration-metric\", \"bg-gray-100\", \"p-4\", \"rounded\"], [1, \"font-semibold\", \"mb-2\"], [1, \"text-2xl\", \"font-bold\", \"text-blue-600\"], [1, \"text-sm\", \"text-gray-600\"], [1, \"text-2xl\", \"font-bold\", \"text-green-600\"], [1, \"text-2xl\", \"font-bold\", \"text-yellow-600\"], [1, \"text-2xl\", \"font-bold\", \"text-purple-600\"], [1, \"inactive-customer-management\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-3\", \"gap-4\"], [1, \"segment-card\", \"bg-blue-50\", \"p-4\", \"rounded\", \"border\"], [1, \"exclusion-card\", \"bg-red-50\", \"p-4\", \"rounded\", \"border\"], [1, \"text-2xl\", \"font-bold\", \"text-red-600\"], [1, \"savings-card\", \"bg-green-50\", \"p-4\", \"rounded\", \"border\"], [1, \"mt-4\"], [1, \"festival-performance\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"timeline-container\"], [\"class\", \"timeline-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"budget-performance-calculator\", \"p-4\", \"bg-white\", \"rounded\", \"shadow\", \"mt-6\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-6\"], [1, \"pre-campaign\", \"bg-gray-50\", \"p-4\", \"rounded\"], [1, \"font-semibold\", \"mb-3\"], [1, \"space-y-3\"], [1, \"block\", \"text-sm\", \"font-medium\", \"mb-1\"], [\"type\", \"number\", \"placeholder\", \"Enter planned budget\", 1, \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"px-3\", \"py-2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Enter expected messages\", 1, \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"px-3\", \"py-2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Enter target conversion rate\", 1, \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"px-3\", \"py-2\", 3, \"ngModel\", \"ngModelChange\"], [1, \"mt-4\", \"p-3\", \"bg-blue-50\", \"rounded\"], [1, \"text-lg\", \"font-bold\", \"text-blue-600\"], [1, \"post-campaign\", \"bg-gray-50\", \"p-4\", \"rounded\"], [\"type\", \"number\", \"placeholder\", \"Enter actual spend\", 1, \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"px-3\", \"py-2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Enter messages sent\", 1, \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"px-3\", \"py-2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"placeholder\", \"Enter actual conversion rate\", 1, \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"px-3\", \"py-2\", 3, \"ngModel\", \"ngModelChange\"], [1, \"mt-4\", \"p-3\", \"bg-green-50\", \"rounded\"], [1, \"text-lg\", \"font-bold\", \"text-green-600\"], [1, \"performance-comparison\", \"mt-6\", \"p-4\", \"bg-gray-50\", \"rounded\"], [1, \"comparison-metric\", \"text-center\"], [1, \"text-2xl\", \"font-bold\", 3, \"ngClass\"], [1, \"kpi-card\", \"bg-white\", \"shadow\", \"rounded\", \"p-4\", \"flex-1\", \"text-center\"], [1, \"kpi-title\", \"font-semibold\", \"text-gray-700\", \"mb-2\"], [1, \"kpi-value\", \"text-2xl\", \"font-bold\", \"text-gray-900\"], [1, \"kpi-change\", \"mt-1\", 3, \"ngClass\"], [3, \"value\"], [1, \"chart-bar-item\", \"flex\", \"items-center\", \"mb-2\"], [1, \"chart-label\", \"w-20\", \"text-sm\"], [1, \"chart-bar-container\", \"flex-1\", \"bg-gray-200\", \"rounded\", \"h-6\", \"mx-2\"], [1, \"chart-bar\", \"h-full\", \"rounded\", \"transition-all\", \"duration-300\"], [1, \"chart-value\", \"w-12\", \"text-sm\", \"text-right\"], [1, \"card-view\", \"flex\", \"space-x-4\", \"overflow-x-auto\"], [\"class\", \"campaign-card bg-gray-100 rounded p-4 min-w-[300px] shadow\", 4, \"ngFor\", \"ngForOf\"], [1, \"campaign-card\", \"bg-gray-100\", \"rounded\", \"p-4\", \"min-w-[300px]\", \"shadow\"], [1, \"mt-4\", \"flex\", \"space-x-2\"], [1, \"px-2\", \"py-1\", \"bg-yellow-400\", \"rounded\", \"hover:bg-yellow-500\"], [1, \"px-2\", \"py-1\", \"bg-green-400\", \"rounded\", \"hover:bg-green-500\"], [1, \"px-2\", \"py-1\", \"bg-blue-400\", \"rounded\", \"hover:bg-blue-500\"], [1, \"px-2\", \"py-1\", \"bg-gray-400\", \"rounded\", \"hover:bg-gray-500\"], [1, \"px-2\", \"py-1\", \"bg-red-400\", \"rounded\", \"hover:bg-red-500\"], [1, \"table-view\", \"overflow-x-auto\"], [1, \"mr-1\", \"px-2\", \"py-1\", \"bg-yellow-400\", \"rounded\", \"hover:bg-yellow-500\"], [1, \"mr-1\", \"px-2\", \"py-1\", \"bg-green-400\", \"rounded\", \"hover:bg-green-500\"], [1, \"mr-1\", \"px-2\", \"py-1\", \"bg-blue-400\", \"rounded\", \"hover:bg-blue-500\"], [1, \"mr-1\", \"px-2\", \"py-1\", \"bg-gray-400\", \"rounded\", \"hover:bg-gray-500\"], [1, \"timeline-item\"], [1, \"timeline-marker\", \"bg-purple-500\", \"w-4\", \"h-4\", \"rounded-full\"], [1, \"timeline-content\", \"ml-6\", \"pb-6\"], [1, \"font-semibold\", \"text-lg\"], [1, \"text-gray-600\", \"text-sm\"], [1, \"grid\", \"grid-cols-2\", \"md:grid-cols-4\", \"gap-4\", \"mt-3\"], [1, \"metric-box\", \"bg-blue-50\", \"p-3\", \"rounded\"], [1, \"text-xl\", \"font-bold\", \"text-blue-600\"], [1, \"metric-box\", \"bg-green-50\", \"p-3\", \"rounded\"], [1, \"text-xl\", \"font-bold\", \"text-green-600\"], [1, \"metric-box\", \"bg-yellow-50\", \"p-3\", \"rounded\"], [1, \"text-xl\", \"font-bold\", \"text-yellow-600\"], [1, \"metric-box\", \"bg-purple-50\", \"p-3\", \"rounded\"], [1, \"text-xl\", \"font-bold\", \"text-purple-600\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n          i0.ɵɵtext(3, \"Date Range:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"input\", 3);\n          i0.ɵɵlistener(\"change\", function DashboardComponent_Template_input_change_4_listener() {\n            return ctx.onDateChange();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(5, \" to \");\n          i0.ɵɵelementStart(6, \"input\", 4);\n          i0.ɵɵlistener(\"change\", function DashboardComponent_Template_input_change_6_listener() {\n            return ctx.onDateChange();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_7_listener() {\n            return ctx.createCampaign();\n          });\n          i0.ɵɵtext(8, \" Create Campaign \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 6);\n          i0.ɵɵtemplate(10, DashboardComponent_div_10_Template, 7, 8, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 9)(13, \"h3\", 10);\n          i0.ɵɵtext(14, \"Channel Performance\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\")(16, \"label\", 11);\n          i0.ɵɵtext(17, \"Criteria:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"select\", 12);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_18_listener($event) {\n            return ctx.selectedCriteria = $event;\n          })(\"change\", function DashboardComponent_Template_select_change_18_listener() {\n            return ctx.onCriteriaChange();\n          });\n          i0.ɵɵtemplate(19, DashboardComponent_option_19_Template, 2, 2, \"option\", 13);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"div\", 14)(21, \"div\", 15);\n          i0.ɵɵtemplate(22, DashboardComponent_div_22_Template, 7, 6, \"div\", 16);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(23, \"div\", 17)(24, \"h3\", 18);\n          i0.ɵɵtext(25, \"Engagement Heatmap\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 19)(27, \"div\", 20)(28, \"div\", 21);\n          i0.ɵɵtext(29, \"Open Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 22);\n          i0.ɵɵtext(31);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(32, \"div\", 20)(33, \"div\", 21);\n          i0.ɵɵtext(34, \"Click Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"div\", 22);\n          i0.ɵɵtext(36);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(37, \"div\", 20)(38, \"div\", 21);\n          i0.ɵɵtext(39, \"Conversion Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"div\", 22);\n          i0.ɵɵtext(41);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(42, \"div\", 23)(43, \"div\", 9)(44, \"h3\", 10);\n          i0.ɵɵtext(45, \"Real-Time Campaign Monitoring\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(46, \"div\")(47, \"button\", 24);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_47_listener() {\n            return ctx.setViewMode(\"card\");\n          });\n          i0.ɵɵtext(48, \" Card View \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"button\", 25);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_49_listener() {\n            return ctx.setViewMode(\"table\");\n          });\n          i0.ɵɵtext(50, \" Table View \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(51, \"div\", 26)(52, \"div\")(53, \"label\", 11);\n          i0.ɵɵtext(54, \"Status:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(55, \"select\", 27);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_select_ngModelChange_55_listener($event) {\n            return ctx.selectedStatus = $event;\n          });\n          i0.ɵɵelementStart(56, \"option\", 28);\n          i0.ɵɵtext(57, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(58, DashboardComponent_option_58_Template, 2, 2, \"option\", 13);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(59, DashboardComponent_div_59_Template, 3, 5, \"div\", 29);\n          i0.ɵɵtemplate(60, DashboardComponent_div_60_Template, 16, 1, \"div\", 30);\n          i0.ɵɵelementStart(61, \"div\", 31)(62, \"button\", 32);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_62_listener() {\n            return ctx.prevCardView();\n          });\n          i0.ɵɵtext(63, \" < Prev \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(64, \"button\", 32);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_64_listener() {\n            return ctx.nextCardView();\n          });\n          i0.ɵɵtext(65, \" Next > \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(66, \"div\", 33)(67, \"h3\", 18);\n          i0.ɵɵtext(68, \"Analytics Suggestions\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(69, \"p\", 34);\n          i0.ɵɵtext(70, \"AI-driven suggestions for campaign optimization will appear here.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(71, \"div\", 35)(72, \"h3\", 18);\n          i0.ɵɵtext(73, \"BSP Performance Comparison\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(74, \"div\", 36)(75, \"table\", 37)(76, \"thead\")(77, \"tr\", 38)(78, \"th\", 39);\n          i0.ɵɵtext(79, \"BSP\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(80, \"th\", 39);\n          i0.ɵɵtext(81, \"Cost\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(82, \"th\", 39);\n          i0.ɵɵtext(83, \"Delivery\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(84, \"th\", 39);\n          i0.ɵɵtext(85, \"Engagement\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(86, \"th\", 39);\n          i0.ɵɵtext(87, \"Optimization\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(88, \"tbody\");\n          i0.ɵɵtemplate(89, DashboardComponent_tr_89_Template, 12, 7, \"tr\", 40);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(90, \"div\", 41)(91, \"h3\", 18);\n          i0.ɵɵtext(92, \"Orchestration Analysis\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(93, \"div\", 42)(94, \"div\", 43)(95, \"h4\", 44);\n          i0.ɵɵtext(96, \"Message Flow Efficiency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(97, \"div\", 45);\n          i0.ɵɵtext(98);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(99, \"p\", 46);\n          i0.ɵɵtext(100, \"Cross-channel message coordination\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(101, \"div\", 43)(102, \"h4\", 44);\n          i0.ɵɵtext(103, \"Channel Synchronization\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(104, \"div\", 47);\n          i0.ɵɵtext(105);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(106, \"p\", 46);\n          i0.ɵɵtext(107, \"Multi-channel timing accuracy\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(108, \"div\", 43)(109, \"h4\", 44);\n          i0.ɵɵtext(110, \"Fallback Success Rate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(111, \"div\", 48);\n          i0.ɵɵtext(112);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(113, \"p\", 46);\n          i0.ɵɵtext(114, \"Alternative channel performance\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(115, \"div\", 43)(116, \"h4\", 44);\n          i0.ɵɵtext(117, \"Overall Orchestration Score\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(118, \"div\", 49);\n          i0.ɵɵtext(119);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(120, \"p\", 46);\n          i0.ɵɵtext(121, \"Comprehensive orchestration rating\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(122, \"div\", 50)(123, \"h3\", 18);\n          i0.ɵɵtext(124, \"Inactive Customer Management\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(125, \"div\", 51)(126, \"div\", 52)(127, \"h4\", 44);\n          i0.ɵɵtext(128, \"Customer Segments\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(129, \"div\", 45);\n          i0.ɵɵtext(130);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(131, \"p\", 46);\n          i0.ɵɵtext(132, \"Total inactive segments identified\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(133, \"div\", 53)(134, \"h4\", 44);\n          i0.ɵɵtext(135, \"Exclusion Lists\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(136, \"div\", 54);\n          i0.ɵɵtext(137);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(138, \"p\", 46);\n          i0.ɵɵtext(139, \"Active exclusion lists\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(140, \"div\", 55)(141, \"h4\", 44);\n          i0.ɵɵtext(142, \"Potential Savings\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(143, \"div\", 47);\n          i0.ɵɵtext(144);\n          i0.ɵɵpipe(145, \"currency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(146, \"p\", 46);\n          i0.ɵɵtext(147, \"Monthly cost reduction\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(148, \"div\", 56)(149, \"h4\", 44);\n          i0.ɵɵtext(150, \"Inactive Customer Breakdown\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(151, \"div\", 36)(152, \"table\", 37)(153, \"thead\")(154, \"tr\", 38)(155, \"th\", 39);\n          i0.ɵɵtext(156, \"Segment\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(157, \"th\", 39);\n          i0.ɵɵtext(158, \"Inactive Count\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(159, \"th\", 39);\n          i0.ɵɵtext(160, \"Last Activity\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(161, \"th\", 39);\n          i0.ɵɵtext(162, \"Potential Savings\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(163, \"tbody\");\n          i0.ɵɵtemplate(164, DashboardComponent_tr_164_Template, 10, 6, \"tr\", 40);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(165, \"div\", 57)(166, \"h3\", 18);\n          i0.ɵɵtext(167, \"Festival Performance Timeline\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(168, \"div\", 58);\n          i0.ɵɵtemplate(169, DashboardComponent_div_169_Template, 30, 10, \"div\", 59);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(170, \"div\", 60)(171, \"h3\", 18);\n          i0.ɵɵtext(172, \"Budget vs Performance Calculator\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(173, \"div\", 61)(174, \"div\", 62)(175, \"h4\", 63);\n          i0.ɵɵtext(176, \"Pre-Campaign Calculation\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(177, \"div\", 64)(178, \"div\")(179, \"label\", 65);\n          i0.ɵɵtext(180, \"Planned Budget\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(181, \"input\", 66);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_181_listener($event) {\n            return ctx.budgetCalculator.preCampaign.plannedBudget = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(182, \"div\")(183, \"label\", 65);\n          i0.ɵɵtext(184, \"Expected Messages\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(185, \"input\", 67);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_185_listener($event) {\n            return ctx.budgetCalculator.preCampaign.expectedMessages = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(186, \"div\")(187, \"label\", 65);\n          i0.ɵɵtext(188, \"Target Conversion Rate (%)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(189, \"input\", 68);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_189_listener($event) {\n            return ctx.budgetCalculator.preCampaign.targetConversionRate = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(190, \"div\", 69)(191, \"div\", 46);\n          i0.ɵɵtext(192, \"Estimated CPM\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(193, \"div\", 70);\n          i0.ɵɵtext(194);\n          i0.ɵɵpipe(195, \"currency\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(196, \"div\", 71)(197, \"h4\", 63);\n          i0.ɵɵtext(198, \"Post-Campaign Analysis\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(199, \"div\", 64)(200, \"div\")(201, \"label\", 65);\n          i0.ɵɵtext(202, \"Actual Spend\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(203, \"input\", 72);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_203_listener($event) {\n            return ctx.budgetCalculator.postCampaign.actualSpend = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(204, \"div\")(205, \"label\", 65);\n          i0.ɵɵtext(206, \"Messages Sent\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(207, \"input\", 73);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_207_listener($event) {\n            return ctx.budgetCalculator.postCampaign.messagesSent = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(208, \"div\")(209, \"label\", 65);\n          i0.ɵɵtext(210, \"Actual Conversion Rate (%)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(211, \"input\", 74);\n          i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_211_listener($event) {\n            return ctx.budgetCalculator.postCampaign.actualConversionRate = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(212, \"div\", 75)(213, \"div\", 46);\n          i0.ɵɵtext(214, \"Actual CPM\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(215, \"div\", 76);\n          i0.ɵɵtext(216);\n          i0.ɵɵpipe(217, \"currency\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(218, \"div\", 77)(219, \"h4\", 63);\n          i0.ɵɵtext(220, \"Performance Comparison\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(221, \"div\", 51)(222, \"div\", 78)(223, \"div\", 46);\n          i0.ɵɵtext(224, \"Budget Variance\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(225, \"div\", 79);\n          i0.ɵɵtext(226);\n          i0.ɵɵpipe(227, \"currency\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(228, \"div\", 78)(229, \"div\", 46);\n          i0.ɵɵtext(230, \"Conversion Variance\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(231, \"div\", 79);\n          i0.ɵɵtext(232);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(233, \"div\", 78)(234, \"div\", 46);\n          i0.ɵɵtext(235, \"Efficiency Score\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(236, \"div\", 49);\n          i0.ɵɵtext(237);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"value\", ctx.startDate)(\"max\", ctx.endDate);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"value\", ctx.endDate)(\"min\", ctx.startDate)(\"max\", ctx.maxDate);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.kpiCards);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngModel\", ctx.selectedCriteria);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.criteriaOptions);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.getChannelChartData());\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(54, _c1, ctx.getHeatmapColor(ctx.engagementMetrics.openRate)));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"\", ctx.engagementMetrics.openRate, \"%\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(56, _c1, ctx.getHeatmapColor(ctx.engagementMetrics.clickRate)));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"\", ctx.engagementMetrics.clickRate, \"%\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(58, _c1, ctx.getHeatmapColor(ctx.engagementMetrics.conversionRate)));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"\", ctx.engagementMetrics.conversionRate, \"%\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(60, _c2, ctx.viewMode === \"card\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(62, _c2, ctx.viewMode === \"table\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.selectedStatus);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.statusOptions);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.viewMode === \"card\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.viewMode === \"table\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.cardViewStart === 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.cardViewStart + 3 >= ctx.filteredCampaigns.length);\n          i0.ɵɵadvance(25);\n          i0.ɵɵproperty(\"ngForOf\", ctx.bspPerformanceData);\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\"\", ctx.orchestrationData.messageFlowEfficiency, \"%\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\"\", ctx.orchestrationData.channelSync, \"%\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\"\", ctx.orchestrationData.fallbackSuccess, \"%\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\"\", ctx.orchestrationData.overallScore, \"/10\");\n          i0.ɵɵadvance(11);\n          i0.ɵɵtextInterpolate(ctx.inactiveCustomerData.segments);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.inactiveCustomerData.exclusionLists);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(145, 46, ctx.inactiveCustomerData.potentialSavings));\n          i0.ɵɵadvance(20);\n          i0.ɵɵproperty(\"ngForOf\", ctx.inactiveCustomerData.segmentBreakdown);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.festivalData);\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngModel\", ctx.budgetCalculator.preCampaign.plannedBudget);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.budgetCalculator.preCampaign.expectedMessages);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.budgetCalculator.preCampaign.targetConversionRate);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(195, 48, ctx.getEstimatedCPM()));\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngModel\", ctx.budgetCalculator.postCampaign.actualSpend);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.budgetCalculator.postCampaign.messagesSent);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.budgetCalculator.postCampaign.actualConversionRate);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(217, 50, ctx.getActualCPM()));\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngClass\", ctx.getBudgetVarianceColor());\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(227, 52, ctx.getBudgetVariance()), \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", ctx.getConversionVarianceColor());\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.getConversionVariance(), \"% \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"\", ctx.getEfficiencyScore(), \"/10\");\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i2.NgStyle, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i2.SlicePipe, i2.DecimalPipe, i2.CurrencyPipe],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"],\n      changeDetection: 0\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","DashboardComponent","constructor","dashboardService","title","value","change","label","name","cost","delivery","engagement","optimization","messageFlowEfficiency","channelSync","fallbackSuccess","overallScore","segments","exclusionLists","potentialSavings","segmentBreakdown","inactiveCount","lastActivity","savings","date","messagesSent","engagementRate","revenue","roi","preCampaign","plannedBudget","expectedMessages","targetConversionRate","postCampaign","actualSpend","actualConversionRate","ngOnInit","channelData","getChannelPerformance","engagementMetrics","getEngagementMetrics","budgetMetrics","getBudgetMetrics","campaignEvents","getCampaignEvents","today","Date","maxDate","toISOString","split","priorDate","setDate","getDate","startDate","endDate","updateChannelChart","error","errorMessage","console","dataKey","selectedCriteria","channelChartData","labels","datasets","backgroundColor","data","channelChartOptions","indexAxis","responsive","plugins","legend","display","position","tooltip","enabled","scales","x","beginAtZero","onCriteriaChange","getHeatmapColor","filteredCampaigns","selectedStatus","filter","c","status","setViewMode","mode","viewMode","prevCardView","cardViewStart","nextCardView","length","onDateChange","start","end","diffTime","Math","abs","getTime","diffDays","alert","maxEnd","getEstimatedCPM","budgetCalculator","getActualCPM","getBudgetVariance","getConversionVariance","getBudgetVarianceColor","variance","getConversionVarianceColor","getEfficiencyScore","budgetEfficiency","max","conversionEfficiency","round","createCampaign","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/project/sandbox/user-workspace/campaign-dashboard/src/app/components/dashboard/dashboard.component.html","/project/sandbox/user-workspace/campaign-dashboard/src/app/components/dashboard/dashboard.component.ts"],"sourcesContent":["<div class=\"top-bar p-4 flex items-center justify-between border-b border-gray-300\">\n  <div class=\"date-range-selector\">\n    <label for=\"dateRange\" class=\"mr-2 font-semibold\">Date Range:</label>\n    <input\n      type=\"date\"\n      id=\"startDate\"\n      name=\"startDate\"\n      max=\"\"\n      class=\"border border-gray-400 rounded px-2 py-1 mr-2\"\n      (change)=\"onDateChange()\"\n      [value]=\"startDate\"\n      [max]=\"endDate\"\n    />\n    to\n    <input\n      type=\"date\"\n      id=\"endDate\"\n      name=\"endDate\"\n      max=\"\"\n      class=\"border border-gray-400 rounded px-2 py-1 ml-2\"\n      (change)=\"onDateChange()\"\n      [value]=\"endDate\"\n      [min]=\"startDate\"\n      [max]=\"maxDate\"\n    />\n  </div>\n  <button\n    class=\"create-campaign-btn bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\"\n    (click)=\"createCampaign()\"\n  >\n    Create Campaign\n  </button>\n</div>\n\n<!-- KPI Cards Row -->\n<div class=\"kpi-cards flex space-x-4 p-4\">\n  <div\n    *ngFor=\"let card of kpiCards\"\n    class=\"kpi-card bg-white shadow rounded p-4 flex-1 text-center\"\n  >\n    <div class=\"kpi-title font-semibold text-gray-700 mb-2\">{{ card.title }}</div>\n    <div class=\"kpi-value text-2xl font-bold text-gray-900\">{{ card.value }}</div>\n    <div\n      class=\"kpi-change mt-1\"\n      [ngClass]=\"{\n        'text-green-600': card.change >= 0,\n        'text-red-600': card.change < 0\n      }\"\n    >\n      {{ card.change >= 0 ? '+' : '' }}{{ card.change }}%\n    </div>\n  </div>\n</div>\n\n<!-- Channel Performance Bar Chart -->\n<div class=\"channel-performance p-4 bg-white rounded shadow\">\n  <div class=\"flex items-center justify-between mb-4\">\n    <h3 class=\"text-lg font-semibold\">Channel Performance</h3>\n    <div>\n      <label class=\"mr-2 font-medium\">Criteria:</label>\n      <select [(ngModel)]=\"selectedCriteria\" (change)=\"onCriteriaChange()\" class=\"border border-gray-300 rounded px-2 py-1\">\n        <option *ngFor=\"let option of criteriaOptions\" [value]=\"option.value\">{{ option.label }}</option>\n      </select>\n    </div>\n  </div>\n  <div class=\"chart-container\">\n    <div class=\"chart-bars\">\n      <div *ngFor=\"let channel of getChannelChartData(); let i = index\" class=\"chart-bar-item flex items-center mb-2\">\n        <div class=\"chart-label w-20 text-sm\">{{ channel.label }}</div>\n        <div class=\"chart-bar-container flex-1 bg-gray-200 rounded h-6 mx-2\">\n          <div \n            class=\"chart-bar h-full rounded transition-all duration-300\"\n            [style.width.%]=\"(channel.value / getMaxValue()) * 100\"\n            [style.background-color]=\"selectedCriteria === 'sent' ? '#42A5F5' : '#66BB6A'\"\n          ></div>\n        </div>\n        <div class=\"chart-value w-12 text-sm text-right\">{{ channel.value }}</div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Engagement Heatmap -->\n<div class=\"engagement-heatmap p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">Engagement Heatmap</h3>\n  <div class=\"grid grid-cols-3 gap-4 text-center\">\n    <div\n      class=\"heatmap-cell p-4 rounded\"\n      [ngStyle]=\"{ 'background-color': getHeatmapColor(engagementMetrics.openRate) }\"\n    >\n      <div class=\"font-semibold\">Open Rate</div>\n      <div class=\"text-2xl\">{{ engagementMetrics.openRate }}%</div>\n    </div>\n    <div\n      class=\"heatmap-cell p-4 rounded\"\n      [ngStyle]=\"{ 'background-color': getHeatmapColor(engagementMetrics.clickRate) }\"\n    >\n      <div class=\"font-semibold\">Click Rate</div>\n      <div class=\"text-2xl\">{{ engagementMetrics.clickRate }}%</div>\n    </div>\n    <div\n      class=\"heatmap-cell p-4 rounded\"\n      [ngStyle]=\"{ 'background-color': getHeatmapColor(engagementMetrics.conversionRate) }\"\n    >\n      <div class=\"font-semibold\">Conversion Rate</div>\n      <div class=\"text-2xl\">{{ engagementMetrics.conversionRate }}%</div>\n    </div>\n  </div>\n</div>\n\n<!-- Real-Time Campaign Monitoring -->\n<div class=\"real-time-monitoring p-4 bg-white rounded shadow mt-6\">\n  <div class=\"flex items-center justify-between mb-4\">\n    <h3 class=\"text-lg font-semibold\">Real-Time Campaign Monitoring</h3>\n    <div>\n      <button\n        class=\"mr-2 px-3 py-1 rounded border\"\n        [ngClass]=\"{ 'bg-blue-600 text-white': viewMode === 'card' }\"\n        (click)=\"setViewMode('card')\"\n      >\n        Card View\n      </button>\n      <button\n        class=\"px-3 py-1 rounded border\"\n        [ngClass]=\"{ 'bg-blue-600 text-white': viewMode === 'table' }\"\n        (click)=\"setViewMode('table')\"\n      >\n        Table View\n      </button>\n    </div>\n  </div>\n\n  <div class=\"filters mb-4 flex space-x-4\">\n    <div>\n      <label class=\"mr-2 font-medium\">Status:</label>\n      <select [(ngModel)]=\"selectedStatus\" class=\"border border-gray-300 rounded px-2 py-1\">\n        <option value=\"\">All</option>\n        <option *ngFor=\"let status of statusOptions\" [value]=\"status\">{{ status }}</option>\n      </select>\n    </div>\n  </div>\n\n  <div *ngIf=\"viewMode === 'card'\" class=\"card-view flex space-x-4 overflow-x-auto\">\n    <div\n      *ngFor=\"let campaign of filteredCampaigns | slice: cardViewStart:cardViewStart + 3\"\n      class=\"campaign-card bg-gray-100 rounded p-4 min-w-[300px] shadow\"\n    >\n      <h4 class=\"font-semibold mb-2\">{{ campaign.name }}</h4>\n      <p>Status: {{ campaign.status }}</p>\n      <p>Start Date: {{ campaign.startDate }}</p>\n      <p>End Date: {{ campaign.endDate }}</p>\n      <div class=\"mt-4 flex space-x-2\">\n        <button class=\"px-2 py-1 bg-yellow-400 rounded hover:bg-yellow-500\">Pause</button>\n        <button class=\"px-2 py-1 bg-green-400 rounded hover:bg-green-500\">Resume</button>\n        <button class=\"px-2 py-1 bg-blue-400 rounded hover:bg-blue-500\">Edit</button>\n        <button class=\"px-2 py-1 bg-gray-400 rounded hover:bg-gray-500\">Duplicate</button>\n        <button class=\"px-2 py-1 bg-red-400 rounded hover:bg-red-500\">Report</button>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"viewMode === 'table'\" class=\"table-view overflow-x-auto\">\n    <table class=\"min-w-full border border-gray-300 rounded\">\n      <thead>\n        <tr class=\"bg-gray-200\">\n          <th class=\"border border-gray-300 px-4 py-2\">Name</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Status</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Start Date</th>\n          <th class=\"border border-gray-300 px-4 py-2\">End Date</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let campaign of filteredCampaigns\">\n          <td class=\"border border-gray-300 px-4 py-2\">{{ campaign.name }}</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ campaign.status }}</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ campaign.startDate }}</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ campaign.endDate }}</td>\n          <td class=\"border border-gray-300 px-4 py-2\">\n            <button class=\"mr-1 px-2 py-1 bg-yellow-400 rounded hover:bg-yellow-500\">Pause</button>\n            <button class=\"mr-1 px-2 py-1 bg-green-400 rounded hover:bg-green-500\">Resume</button>\n            <button class=\"mr-1 px-2 py-1 bg-blue-400 rounded hover:bg-blue-500\">Edit</button>\n            <button class=\"mr-1 px-2 py-1 bg-gray-400 rounded hover:bg-gray-500\">Duplicate</button>\n            <button class=\"px-2 py-1 bg-red-400 rounded hover:bg-red-500\">Report</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div class=\"mt-4 flex justify-between\">\n    <button\n      class=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\n      (click)=\"prevCardView()\"\n      [disabled]=\"cardViewStart === 0\"\n    >\n      < Prev\n    </button>\n    <button\n      class=\"px-3 py-1 bg-gray-300 rounded hover:bg-gray-400\"\n      (click)=\"nextCardView()\"\n      [disabled]=\"cardViewStart + 3 >= filteredCampaigns.length\"\n    >\n      Next >\n    </button>\n  </div>\n</div>\n\n<!-- Analytics Suggestions Section -->\n<div class=\"analytics-suggestions p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">Analytics Suggestions</h3>\n  <p class=\"text-gray-600\">AI-driven suggestions for campaign optimization will appear here.</p>\n</div>\n\n<!-- BSP Performance Comparison -->\n<div class=\"bsp-performance p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">BSP Performance Comparison</h3>\n  <div class=\"overflow-x-auto\">\n    <table class=\"min-w-full border border-gray-300 rounded\">\n      <thead>\n        <tr class=\"bg-gray-200\">\n          <th class=\"border border-gray-300 px-4 py-2\">BSP</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Cost</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Delivery</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Engagement</th>\n          <th class=\"border border-gray-300 px-4 py-2\">Optimization</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let bsp of bspPerformanceData\">\n          <td class=\"border border-gray-300 px-4 py-2\">{{ bsp.name }}</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ bsp.cost | currency }}</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ bsp.delivery }}%</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ bsp.engagement }}%</td>\n          <td class=\"border border-gray-300 px-4 py-2\">{{ bsp.optimization }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<!-- Orchestration Analysis -->\n<div class=\"orchestration-analysis p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">Orchestration Analysis</h3>\n  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n    <div class=\"orchestration-metric bg-gray-100 p-4 rounded\">\n      <h4 class=\"font-semibold mb-2\">Message Flow Efficiency</h4>\n      <div class=\"text-2xl font-bold text-blue-600\">{{ orchestrationData.messageFlowEfficiency }}%</div>\n      <p class=\"text-sm text-gray-600\">Cross-channel message coordination</p>\n    </div>\n    <div class=\"orchestration-metric bg-gray-100 p-4 rounded\">\n      <h4 class=\"font-semibold mb-2\">Channel Synchronization</h4>\n      <div class=\"text-2xl font-bold text-green-600\">{{ orchestrationData.channelSync }}%</div>\n      <p class=\"text-sm text-gray-600\">Multi-channel timing accuracy</p>\n    </div>\n    <div class=\"orchestration-metric bg-gray-100 p-4 rounded\">\n      <h4 class=\"font-semibold mb-2\">Fallback Success Rate</h4>\n      <div class=\"text-2xl font-bold text-yellow-600\">{{ orchestrationData.fallbackSuccess }}%</div>\n      <p class=\"text-sm text-gray-600\">Alternative channel performance</p>\n    </div>\n    <div class=\"orchestration-metric bg-gray-100 p-4 rounded\">\n      <h4 class=\"font-semibold mb-2\">Overall Orchestration Score</h4>\n      <div class=\"text-2xl font-bold text-purple-600\">{{ orchestrationData.overallScore }}/10</div>\n      <p class=\"text-sm text-gray-600\">Comprehensive orchestration rating</p>\n    </div>\n  </div>\n</div>\n\n<!-- Inactive Customer Management -->\n<div class=\"inactive-customer-management p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">Inactive Customer Management</h3>\n  <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n    <div class=\"segment-card bg-blue-50 p-4 rounded border\">\n      <h4 class=\"font-semibold mb-2\">Customer Segments</h4>\n      <div class=\"text-2xl font-bold text-blue-600\">{{ inactiveCustomerData.segments }}</div>\n      <p class=\"text-sm text-gray-600\">Total inactive segments identified</p>\n    </div>\n    <div class=\"exclusion-card bg-red-50 p-4 rounded border\">\n      <h4 class=\"font-semibold mb-2\">Exclusion Lists</h4>\n      <div class=\"text-2xl font-bold text-red-600\">{{ inactiveCustomerData.exclusionLists }}</div>\n      <p class=\"text-sm text-gray-600\">Active exclusion lists</p>\n    </div>\n    <div class=\"savings-card bg-green-50 p-4 rounded border\">\n      <h4 class=\"font-semibold mb-2\">Potential Savings</h4>\n      <div class=\"text-2xl font-bold text-green-600\">{{ inactiveCustomerData.potentialSavings | currency }}</div>\n      <p class=\"text-sm text-gray-600\">Monthly cost reduction</p>\n    </div>\n  </div>\n  <div class=\"mt-4\">\n    <h4 class=\"font-semibold mb-2\">Inactive Customer Breakdown</h4>\n    <div class=\"overflow-x-auto\">\n      <table class=\"min-w-full border border-gray-300 rounded\">\n        <thead>\n          <tr class=\"bg-gray-200\">\n            <th class=\"border border-gray-300 px-4 py-2\">Segment</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Inactive Count</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Last Activity</th>\n            <th class=\"border border-gray-300 px-4 py-2\">Potential Savings</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let segment of inactiveCustomerData.segmentBreakdown\">\n            <td class=\"border border-gray-300 px-4 py-2\">{{ segment.name }}</td>\n            <td class=\"border border-gray-300 px-4 py-2\">{{ segment.inactiveCount }}</td>\n            <td class=\"border border-gray-300 px-4 py-2\">{{ segment.lastActivity }}</td>\n            <td class=\"border border-gray-300 px-4 py-2\">{{ segment.savings | currency }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<!-- Festival Performance Timeline -->\n<div class=\"festival-performance p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">Festival Performance Timeline</h3>\n  <div class=\"timeline-container\">\n    <div class=\"timeline-item\" *ngFor=\"let festival of festivalData\">\n      <div class=\"timeline-marker bg-purple-500 w-4 h-4 rounded-full\"></div>\n      <div class=\"timeline-content ml-6 pb-6\">\n        <h4 class=\"font-semibold text-lg\">{{ festival.name }}</h4>\n        <p class=\"text-gray-600 text-sm\">{{ festival.date }}</p>\n        <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3\">\n          <div class=\"metric-box bg-blue-50 p-3 rounded\">\n            <div class=\"text-sm text-gray-600\">Messages Sent</div>\n            <div class=\"text-xl font-bold text-blue-600\">{{ festival.messagesSent | number }}</div>\n          </div>\n          <div class=\"metric-box bg-green-50 p-3 rounded\">\n            <div class=\"text-sm text-gray-600\">Engagement Rate</div>\n            <div class=\"text-xl font-bold text-green-600\">{{ festival.engagementRate }}%</div>\n          </div>\n          <div class=\"metric-box bg-yellow-50 p-3 rounded\">\n            <div class=\"text-sm text-gray-600\">Revenue</div>\n            <div class=\"text-xl font-bold text-yellow-600\">{{ festival.revenue | currency }}</div>\n          </div>\n          <div class=\"metric-box bg-purple-50 p-3 rounded\">\n            <div class=\"text-sm text-gray-600\">ROI</div>\n            <div class=\"text-xl font-bold text-purple-600\">{{ festival.roi }}%</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Budget vs Performance Calculator -->\n<div class=\"budget-performance-calculator p-4 bg-white rounded shadow mt-6\">\n  <h3 class=\"text-lg font-semibold mb-4\">Budget vs Performance Calculator</h3>\n  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n    <!-- Pre-Campaign Calculation -->\n    <div class=\"pre-campaign bg-gray-50 p-4 rounded\">\n      <h4 class=\"font-semibold mb-3\">Pre-Campaign Calculation</h4>\n      <div class=\"space-y-3\">\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Planned Budget</label>\n          <input\n            type=\"number\"\n            [(ngModel)]=\"budgetCalculator.preCampaign.plannedBudget\"\n            class=\"w-full border border-gray-300 rounded px-3 py-2\"\n            placeholder=\"Enter planned budget\"\n          />\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Expected Messages</label>\n          <input\n            type=\"number\"\n            [(ngModel)]=\"budgetCalculator.preCampaign.expectedMessages\"\n            class=\"w-full border border-gray-300 rounded px-3 py-2\"\n            placeholder=\"Enter expected messages\"\n          />\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Target Conversion Rate (%)</label>\n          <input\n            type=\"number\"\n            [(ngModel)]=\"budgetCalculator.preCampaign.targetConversionRate\"\n            class=\"w-full border border-gray-300 rounded px-3 py-2\"\n            placeholder=\"Enter target conversion rate\"\n          />\n        </div>\n        <div class=\"mt-4 p-3 bg-blue-50 rounded\">\n          <div class=\"text-sm text-gray-600\">Estimated CPM</div>\n          <div class=\"text-lg font-bold text-blue-600\">{{ getEstimatedCPM() | currency }}</div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Post-Campaign Analysis -->\n    <div class=\"post-campaign bg-gray-50 p-4 rounded\">\n      <h4 class=\"font-semibold mb-3\">Post-Campaign Analysis</h4>\n      <div class=\"space-y-3\">\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Actual Spend</label>\n          <input\n            type=\"number\"\n            [(ngModel)]=\"budgetCalculator.postCampaign.actualSpend\"\n            class=\"w-full border border-gray-300 rounded px-3 py-2\"\n            placeholder=\"Enter actual spend\"\n          />\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Messages Sent</label>\n          <input\n            type=\"number\"\n            [(ngModel)]=\"budgetCalculator.postCampaign.messagesSent\"\n            class=\"w-full border border-gray-300 rounded px-3 py-2\"\n            placeholder=\"Enter messages sent\"\n          />\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Actual Conversion Rate (%)</label>\n          <input\n            type=\"number\"\n            [(ngModel)]=\"budgetCalculator.postCampaign.actualConversionRate\"\n            class=\"w-full border border-gray-300 rounded px-3 py-2\"\n            placeholder=\"Enter actual conversion rate\"\n          />\n        </div>\n        <div class=\"mt-4 p-3 bg-green-50 rounded\">\n          <div class=\"text-sm text-gray-600\">Actual CPM</div>\n          <div class=\"text-lg font-bold text-green-600\">{{ getActualCPM() | currency }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Performance Comparison -->\n  <div class=\"performance-comparison mt-6 p-4 bg-gray-50 rounded\">\n    <h4 class=\"font-semibold mb-3\">Performance Comparison</h4>\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n      <div class=\"comparison-metric text-center\">\n        <div class=\"text-sm text-gray-600\">Budget Variance</div>\n        <div class=\"text-2xl font-bold\" [ngClass]=\"getBudgetVarianceColor()\">\n          {{ getBudgetVariance() | currency }}\n        </div>\n      </div>\n      <div class=\"comparison-metric text-center\">\n        <div class=\"text-sm text-gray-600\">Conversion Variance</div>\n        <div class=\"text-2xl font-bold\" [ngClass]=\"getConversionVarianceColor()\">\n          {{ getConversionVariance() }}%\n        </div>\n      </div>\n      <div class=\"comparison-metric text-center\">\n        <div class=\"text-sm text-gray-600\">Efficiency Score</div>\n        <div class=\"text-2xl font-bold text-purple-600\">{{ getEfficiencyScore() }}/10</div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { DashboardDataService } from '../../services/dashboard-data.service';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DashboardComponent implements OnInit {\n  channelData: any;\n  engagementMetrics: any;\n  budgetMetrics: any;\n  campaignEvents: any;\n  errorMessage: string = '';\n\n  startDate: string = '';\n  endDate: string = '';\n  maxDate: string = '';\n\n  kpiCards = [\n    { title: 'Total Revenue', value: '$1.2M', change: 5.4 },\n    { title: 'Campaign ROI', value: '350%', change: 3.2 },\n    { title: 'Messages Sent', value: '1.5M', change: -1.1 },\n    { title: 'Avg Conversion Rate', value: '4.5%', change: 0.8 }\n  ];\n\n  selectedCriteria: string = 'sent';\n  criteriaOptions = [\n    { label: 'Sent', value: 'sent' },\n    { label: 'Delivered', value: 'delivered' }\n  ];\n\n  channelChartData: any;\n  channelChartOptions: any;\n\n  constructor(private dashboardService: DashboardDataService) {}\n\n  ngOnInit() {\n    try {\n      this.channelData = this.dashboardService.getChannelPerformance();\n      this.engagementMetrics = this.dashboardService.getEngagementMetrics();\n      this.budgetMetrics = this.dashboardService.getBudgetMetrics();\n      this.campaignEvents = this.dashboardService.getCampaignEvents();\n\n      // Initialize date range to last 7 days\n      const today = new Date();\n      this.maxDate = today.toISOString().split('T')[0];\n      const priorDate = new Date().setDate(today.getDate() - 7);\n      this.startDate = new Date(priorDate).toISOString().split('T')[0];\n      this.endDate = this.maxDate;\n\n      this.updateChannelChart();\n    } catch (error) {\n      this.errorMessage = 'An error occurred while loading dashboard data.';\n      console.error(error);\n    }\n  }\n\n  updateChannelChart() {\n    if (!this.channelData) return;\n\n    const dataKey = this.selectedCriteria === 'sent' ? 'Sent' : 'Delivered';\n\n    this.channelChartData = {\n      labels: this.channelData.labels,\n      datasets: [\n        {\n          label: dataKey,\n          backgroundColor: this.selectedCriteria === 'sent' ? '#42A5F5' : '#66BB6A',\n          data:\n            this.selectedCriteria === 'sent'\n              ? this.channelData.datasets[0].data\n              : this.channelData.datasets[1].data\n        }\n      ]\n    };\n\n    this.channelChartOptions = {\n      indexAxis: 'y',\n      responsive: true,\n      plugins: {\n        legend: {\n          display: true,\n          position: 'top'\n        },\n        tooltip: {\n          enabled: true\n        }\n      },\n      scales: {\n        x: {\n          beginAtZero: true\n        }\n      }\n    };\n  }\n\n  onCriteriaChange() {\n    this.updateChannelChart();\n  }\n\n  getHeatmapColor(value: number): string {\n    if (value >= 75) {\n      return '#34D399'; // green\n    } else if (value >= 50) {\n      return '#FBBF24'; // yellow\n    } else {\n      return '#F87171'; // red\n    }\n  }\n\n  viewMode: 'card' | 'table' = 'card';\n  statusOptions = ['Active', 'Paused', 'Completed'];\n  selectedStatus: string = '';\n\n  cardViewStart: number = 0;\n\n  get filteredCampaigns() {\n    if (!this.campaignEvents) return [];\n    if (!this.selectedStatus) return this.campaignEvents;\n    return this.campaignEvents.filter((c: any) => c.status === this.selectedStatus);\n  }\n\n  setViewMode(mode: 'card' | 'table') {\n    this.viewMode = mode;\n  }\n\n  prevCardView() {\n    if (this.cardViewStart > 0) {\n      this.cardViewStart -= 1;\n    }\n  }\n\n  nextCardView() {\n    if (this.cardViewStart + 3 < this.filteredCampaigns.length) {\n      this.cardViewStart += 1;\n    }\n  }\n\n  onDateChange() {\n    // Validate date range max 15 days\n    if (this.startDate && this.endDate) {\n      const start = new Date(this.startDate);\n      const end = new Date(this.endDate);\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const diffDays = diffTime / (1000 * 60 * 60 * 24);\n      if (diffDays > 15) {\n        alert('Date range cannot exceed 15 days.');\n        // Reset endDate to startDate + 15 days or today\n        const maxEnd = new Date(start);\n        maxEnd.setDate(start.getDate() + 15);\n        this.endDate = maxEnd > new Date() ? new Date().toISOString().split('T')[0] : maxEnd.toISOString().split('T')[0];\n      }\n    }\n    // TODO: Refresh data based on new date range\n  }\n\n  bspPerformanceData = [\n    { name: 'BSP 1', cost: 1200, delivery: 95, engagement: 80, optimization: 'High' },\n    { name: 'BSP 2', cost: 1500, delivery: 90, engagement: 75, optimization: 'Medium' },\n    { name: 'BSP 3', cost: 1100, delivery: 85, engagement: 70, optimization: 'Low' },\n    { name: 'BSP 4', cost: 1300, delivery: 92, engagement: 78, optimization: 'High' },\n    { name: 'BSP 5', cost: 1400, delivery: 88, engagement: 74, optimization: 'Medium' }\n  ];\n\n  orchestrationData = {\n    messageFlowEfficiency: 87,\n    channelSync: 92,\n    fallbackSuccess: 78,\n    overallScore: 8.5\n  };\n\n  inactiveCustomerData = {\n    segments: 12,\n    exclusionLists: 8,\n    potentialSavings: 15000,\n    segmentBreakdown: [\n      { name: 'Dormant Users', inactiveCount: 2500, lastActivity: '90+ days', savings: 5000 },\n      { name: 'Low Engagement', inactiveCount: 1800, lastActivity: '60+ days', savings: 3500 },\n      { name: 'Unsubscribed', inactiveCount: 3200, lastActivity: '30+ days', savings: 6500 }\n    ]\n  };\n\n  festivalData = [\n    { name: 'Diwali 2024', date: 'November 1, 2024', messagesSent: 250000, engagementRate: 85, revenue: 125000, roi: 320 },\n    { name: 'Christmas 2023', date: 'December 25, 2023', messagesSent: 180000, engagementRate: 78, revenue: 95000, roi: 280 },\n    { name: 'New Year 2024', date: 'January 1, 2024', messagesSent: 200000, engagementRate: 82, revenue: 110000, roi: 300 }\n  ];\n\n  budgetCalculator = {\n    preCampaign: {\n      plannedBudget: 10000,\n      expectedMessages: 50000,\n      targetConversionRate: 5\n    },\n    postCampaign: {\n      actualSpend: 9500,\n      messagesSent: 48000,\n      actualConversionRate: 5.5\n    }\n  };\n\n  getEstimatedCPM(): number {\n    if (this.budgetCalculator.preCampaign.expectedMessages > 0) {\n      return (this.budgetCalculator.preCampaign.plannedBudget / this.budgetCalculator.preCampaign.expectedMessages) * 1000;\n    }\n    return 0;\n  }\n\n  getActualCPM(): number {\n    if (this.budgetCalculator.postCampaign.messagesSent > 0) {\n      return (this.budgetCalculator.postCampaign.actualSpend / this.budgetCalculator.postCampaign.messagesSent) * 1000;\n    }\n    return 0;\n  }\n\n  getBudgetVariance(): number {\n    return this.budgetCalculator.postCampaign.actualSpend - this.budgetCalculator.preCampaign.plannedBudget;\n  }\n\n  getConversionVariance(): number {\n    return this.budgetCalculator.postCampaign.actualConversionRate - this.budgetCalculator.preCampaign.targetConversionRate;\n  }\n\n  getBudgetVarianceColor(): string {\n    const variance = this.getBudgetVariance();\n    return variance <= 0 ? 'text-green-600' : 'text-red-600';\n  }\n\n  getConversionVarianceColor(): string {\n    const variance = this.getConversionVariance();\n    return variance >= 0 ? 'text-green-600' : 'text-red-600';\n  }\n\n  getEfficiencyScore(): number {\n    const budgetEfficiency = this.getBudgetVariance() <= 0 ? 5 : Math.max(0, 5 - Math.abs(this.getBudgetVariance()) / 1000);\n    const conversionEfficiency = this.getConversionVariance() >= 0 ? 5 : Math.max(0, 5 - Math.abs(this.getConversionVariance()));\n    return Math.round((budgetEfficiency + conversionEfficiency) * 10) / 10;\n  }\n\n  createCampaign() {\n    alert('Create Campaign button clicked!');\n    // TODO: Implement create campaign functionality\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}