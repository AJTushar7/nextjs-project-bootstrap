{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/dashboard-data.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = function (a0, a1) {\n  return {\n    \"text-green-600\": a0,\n    \"text-red-600\": a1\n  };\n};\nfunction DashboardComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const card_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(card_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(card_r1.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, card_r1.change >= 0, card_r1.change < 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", card_r1.change >= 0 ? \"+\" : \"\", \"\", card_r1.change, \"% \");\n  }\n}\nexport class DashboardComponent {\n  constructor(dashboardService) {\n    this.dashboardService = dashboardService;\n    this.errorMessage = '';\n    this.startDate = '';\n    this.endDate = '';\n  }\n  ngOnInit() {\n    try {\n      this.channelData = this.dashboardService.getChannelPerformance();\n      this.engagementMetrics = this.dashboardService.getEngagementMetrics();\n      this.budgetMetrics = this.dashboardService.getBudgetMetrics();\n      this.campaignEvents = this.dashboardService.getCampaignEvents();\n      // Initialize date range to last 7 days\n      const today = new Date();\n      const priorDate = new Date().setDate(today.getDate() - 7);\n      this.startDate = new Date(priorDate).toISOString().split('T')[0];\n      this.endDate = today.toISOString().split('T')[0];\n    } catch (error) {\n      this.errorMessage = 'An error occurred while loading dashboard data.';\n      console.error(error);\n    }\n  }\n  onDateChange() {\n    // Validate date range max 15 days\n    if (this.startDate && this.endDate) {\n      const start = new Date(this.startDate);\n      const end = new Date(this.endDate);\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const diffDays = diffTime / (1000 * 60 * 60 * 24);\n      if (diffDays > 15) {\n        alert('Date range cannot exceed 15 days.');\n        // Reset endDate to startDate + 15 days or today\n        const maxEnd = new Date(start);\n        maxEnd.setDate(start.getDate() + 15);\n        this.endDate = maxEnd > new Date() ? new Date().toISOString().split('T')[0] : maxEnd.toISOString().split('T')[0];\n      }\n    }\n    // TODO: Refresh data based on new date range\n  }\n\n  createCampaign() {\n    alert('Create Campaign button clicked!');\n    // TODO: Implement create campaign functionality\n  }\n\n  static {\n    this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.DashboardDataService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 11,\n      vars: 6,\n      consts: [[1, \"top-bar\", \"p-4\", \"flex\", \"items-center\", \"justify-between\", \"border-b\", \"border-gray-300\"], [1, \"date-range-selector\"], [\"for\", \"dateRange\", 1, \"mr-2\", \"font-semibold\"], [\"type\", \"date\", \"id\", \"startDate\", \"name\", \"startDate\", \"max\", \"\", 1, \"border\", \"border-gray-400\", \"rounded\", \"px-2\", \"py-1\", \"mr-2\", 3, \"value\", \"max\", \"change\"], [\"type\", \"date\", \"id\", \"endDate\", \"name\", \"endDate\", \"max\", \"\", 1, \"border\", \"border-gray-400\", \"rounded\", \"px-2\", \"py-1\", \"ml-2\", 3, \"value\", \"min\", \"max\", \"change\"], [1, \"create-campaign-btn\", \"bg-blue-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", \"hover:bg-blue-700\", \"transition\", 3, \"click\"], [1, \"kpi-cards\", \"flex\", \"space-x-4\", \"p-4\"], [\"class\", \"kpi-card bg-white shadow rounded p-4 flex-1 text-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"kpi-card\", \"bg-white\", \"shadow\", \"rounded\", \"p-4\", \"flex-1\", \"text-center\"], [1, \"kpi-title\", \"font-semibold\", \"text-gray-700\", \"mb-2\"], [1, \"kpi-value\", \"text-2xl\", \"font-bold\", \"text-gray-900\"], [1, \"kpi-change\", \"mt-1\", 3, \"ngClass\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n          i0.ɵɵtext(3, \"Date Range:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"input\", 3);\n          i0.ɵɵlistener(\"change\", function DashboardComponent_Template_input_change_4_listener() {\n            return ctx.onDateChange();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(5, \" to \");\n          i0.ɵɵelementStart(6, \"input\", 4);\n          i0.ɵɵlistener(\"change\", function DashboardComponent_Template_input_change_6_listener() {\n            return ctx.onDateChange();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_7_listener() {\n            return ctx.createCampaign();\n          });\n          i0.ɵɵtext(8, \" Create Campaign \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 6);\n          i0.ɵɵtemplate(10, DashboardComponent_div_10_Template, 7, 8, \"div\", 7);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"value\", ctx.startDate)(\"max\", ctx.endDate);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"value\", ctx.endDate)(\"min\", ctx.startDate)(\"max\", ctx.maxDate);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.kpiCards);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"],\n      changeDetection: 0\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","DashboardComponent","constructor","dashboardService","ngOnInit","channelData","getChannelPerformance","engagementMetrics","getEngagementMetrics","budgetMetrics","getBudgetMetrics","campaignEvents","getCampaignEvents","today","Date","priorDate","setDate","getDate","startDate","toISOString","split","endDate","error","errorMessage","console","onDateChange","start","end","diffTime","Math","abs","getTime","diffDays","alert","maxEnd","createCampaign","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/project/sandbox/user-workspace/campaign-dashboard/src/app/components/dashboard/dashboard.component.html","/project/sandbox/user-workspace/campaign-dashboard/src/app/components/dashboard/dashboard.component.ts"],"sourcesContent":["<div class=\"top-bar p-4 flex items-center justify-between border-b border-gray-300\">\n  <div class=\"date-range-selector\">\n    <label for=\"dateRange\" class=\"mr-2 font-semibold\">Date Range:</label>\n    <input\n      type=\"date\"\n      id=\"startDate\"\n      name=\"startDate\"\n      max=\"\"\n      class=\"border border-gray-400 rounded px-2 py-1 mr-2\"\n      (change)=\"onDateChange()\"\n      [value]=\"startDate\"\n      [max]=\"endDate\"\n    />\n    to\n    <input\n      type=\"date\"\n      id=\"endDate\"\n      name=\"endDate\"\n      max=\"\"\n      class=\"border border-gray-400 rounded px-2 py-1 ml-2\"\n      (change)=\"onDateChange()\"\n      [value]=\"endDate\"\n      [min]=\"startDate\"\n      [max]=\"maxDate\"\n    />\n  </div>\n  <button\n    class=\"create-campaign-btn bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\"\n    (click)=\"createCampaign()\"\n  >\n    Create Campaign\n  </button>\n</div>\n\n<!-- KPI Cards Row -->\n<div class=\"kpi-cards flex space-x-4 p-4\">\n  <div\n    *ngFor=\"let card of kpiCards\"\n    class=\"kpi-card bg-white shadow rounded p-4 flex-1 text-center\"\n  >\n    <div class=\"kpi-title font-semibold text-gray-700 mb-2\">{{ card.title }}</div>\n    <div class=\"kpi-value text-2xl font-bold text-gray-900\">{{ card.value }}</div>\n    <div\n      class=\"kpi-change mt-1\"\n      [ngClass]=\"{\n        'text-green-600': card.change >= 0,\n        'text-red-600': card.change < 0\n      }\"\n    >\n      {{ card.change >= 0 ? '+' : '' }}{{ card.change }}%\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { DashboardDataService } from '../../services/dashboard-data.service';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DashboardComponent implements OnInit {\n  channelData: any;\n  engagementMetrics: any;\n  budgetMetrics: any;\n  campaignEvents: any;\n  errorMessage: string = '';\n\n  startDate: string = '';\n  endDate: string = '';\n\n  constructor(private dashboardService: DashboardDataService) {}\n\n  ngOnInit() {\n    try {\n      this.channelData = this.dashboardService.getChannelPerformance();\n      this.engagementMetrics = this.dashboardService.getEngagementMetrics();\n      this.budgetMetrics = this.dashboardService.getBudgetMetrics();\n      this.campaignEvents = this.dashboardService.getCampaignEvents();\n\n      // Initialize date range to last 7 days\n      const today = new Date();\n      const priorDate = new Date().setDate(today.getDate() - 7);\n      this.startDate = new Date(priorDate).toISOString().split('T')[0];\n      this.endDate = today.toISOString().split('T')[0];\n    } catch (error) {\n      this.errorMessage = 'An error occurred while loading dashboard data.';\n      console.error(error);\n    }\n  }\n\n  onDateChange() {\n    // Validate date range max 15 days\n    if (this.startDate && this.endDate) {\n      const start = new Date(this.startDate);\n      const end = new Date(this.endDate);\n      const diffTime = Math.abs(end.getTime() - start.getTime());\n      const diffDays = diffTime / (1000 * 60 * 60 * 24);\n      if (diffDays > 15) {\n        alert('Date range cannot exceed 15 days.');\n        // Reset endDate to startDate + 15 days or today\n        const maxEnd = new Date(start);\n        maxEnd.setDate(start.getDate() + 15);\n        this.endDate = maxEnd > new Date() ? new Date().toISOString().split('T')[0] : maxEnd.toISOString().split('T')[0];\n      }\n    }\n    // TODO: Refresh data based on new date range\n  }\n\n  createCampaign() {\n    alert('Create Campaign button clicked!');\n    // TODO: Implement create campaign functionality\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}